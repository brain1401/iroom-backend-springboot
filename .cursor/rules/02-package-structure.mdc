---
description: Domain-Driven Design ê¸°ë°˜ íŒ¨í‚¤ì§€ êµ¬ì¡° ê·œì¹™
globs: src/main/java/**/*.java
alwaysApply: false
---

# íŒ¨í‚¤ì§€ êµ¬ì¡° ê·œì¹™ (Domain-Driven Design)

## ğŸ“¦ ê¸°ë³¸ íŒ¨í‚¤ì§€ êµ¬ì¡°

```
com.iroomclass.springbackend/
â”œâ”€â”€ domain/                    # ë„ë©”ì¸ë³„ íŒ¨í‚¤ì§€
â”‚   â”œâ”€â”€ {domain}/             # user, admin, system
â”‚   â”‚   â”œâ”€â”€ controller/       # REST API ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”‚   â”œâ”€â”€ service/          # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ repository/       # ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ
â”‚   â”‚   â”œâ”€â”€ entity/           # JPA ì—”í‹°í‹°
â”‚   â”‚   â””â”€â”€ dto/              # ë°ì´í„° ì „ì†¡ ê°ì²´
â”œâ”€â”€ common/                   # ê³µí†µ ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ ApiResponse.java      # í‘œì¤€ ì‘ë‹µ ë˜í¼
â”‚   â”œâ”€â”€ ResultStatus.java     # ì‘ë‹µ ìƒíƒœ
â”‚   â””â”€â”€ exception/            # ê³µí†µ ì˜ˆì™¸ ì²˜ë¦¬
â””â”€â”€ config/                   # ì„¤ì • í´ë˜ìŠ¤
    â”œâ”€â”€ SecurityConfig.java
    â”œâ”€â”€ OpenApiConfig.java
    â””â”€â”€ WebConfig.java
```

## ğŸ¯ ë„ë©”ì¸ ë¶„ë¥˜

### User Domain (í•™ìƒ ì˜ì—­)
```
domain/user/
â”œâ”€â”€ info/                     # í•™ìƒ ì •ë³´ ê´€ë¦¬
â”‚   â”œâ”€â”€ controller/UserController.java
â”‚   â”œâ”€â”€ service/UserService.java
â”‚   â”œâ”€â”€ repository/UserRepository.java
â”‚   â”œâ”€â”€ entity/User.java
â”‚   â””â”€â”€ dto/
â”‚       â”œâ”€â”€ UserLoginRequest.java
â”‚       â””â”€â”€ UserLoginResponse.java
â”œâ”€â”€ exam/                     # ì‹œí—˜ ì‘ì‹œ
â”‚   â””â”€â”€ answer/              # ë‹µì•ˆ ê´€ë¦¬
â”œâ”€â”€ student/                  # í•™ìƒ ê²°ê³¼ ì¡°íšŒ
```

### Admin Domain (ê´€ë¦¬ì ì˜ì—­)
```
domain/admin/
â”œâ”€â”€ info/                     # ê´€ë¦¬ì ì •ë³´
â”œâ”€â”€ question/                 # ë¬¸ì œ ê´€ë¦¬
â”œâ”€â”€ exam/                     # ì‹œí—˜ ê´€ë¦¬
â”œâ”€â”€ unit/                     # ë‹¨ì› ê´€ë¦¬
â”œâ”€â”€ print/                    # ì¸ì‡„ ê´€ë¦¬
â”œâ”€â”€ dashboard/                # ëŒ€ì‹œë³´ë“œ
â”œâ”€â”€ submission/               # ì œì¶œë¬¼ ê´€ë¦¬
â””â”€â”€ statistics/               # í†µê³„ ë¶„ì„
```

### System Domain (ì‹œìŠ¤í…œ ì˜ì—­)
```
domain/system/
â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ HealthController.java
â”‚   â”œâ”€â”€ EchoController.java
â”‚   â””â”€â”€ GreetingController.java
â”œâ”€â”€ service/SystemService.java
â””â”€â”€ dto/
    â”œâ”€â”€ SystemHealthDto.java
    â”œâ”€â”€ EchoDto.java
    â””â”€â”€ GreetingDto.java
```

## ğŸ“‹ íŒ¨í‚¤ì§€ ëª…ëª… ê·œì¹™

### ë„ë©”ì¸ íŒ¨í‚¤ì§€
- **ì†Œë¬¸ì, ë‹¨ìˆ˜í˜•** ì‚¬ìš©: `user`, `admin`, `system`
- **ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ë¯¸** ë°˜ì˜: `question` (ë¬¸ì œ), `exam` (ì‹œí—˜)

### ê³„ì¸µ íŒ¨í‚¤ì§€  
- **ë³µìˆ˜í˜•** ì‚¬ìš©: `controllers`, `services`, `repositories`
- **í‘œì¤€ ì´ë¦„** ê³ ìˆ˜: `dto`, `entity`, `exception`

### ì„œë¸Œ ë„ë©”ì¸
- **ê¸°ëŠ¥ë³„ ë¶„ë¦¬**: `user.info`, `user.exam`, `admin.question`
- **ë…¼ë¦¬ì  ê·¸ë£¹í•‘**: ê´€ë ¨ ê¸°ëŠ¥ë¼ë¦¬ ë¬¶ìŒ

## ğŸ”„ ê³„ì¸µë³„ ì±…ì„

### Controller ê³„ì¸µ
- HTTP ìš”ì²­/ì‘ë‹µ ì²˜ë¦¬
- ì…ë ¥ ë°ì´í„° ê²€ì¦ (`@Valid`)
- ì¸ì¦/ì¸ê°€ ì²˜ë¦¬ (`@PreAuthorize`)
- API ë¬¸ì„œí™” (`@Tag`, `@Operation`)

### Service ê³„ì¸µ  
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹¤í–‰
- íŠ¸ëœì­ì…˜ ê²½ê³„ ê´€ë¦¬ (`@Transactional`)
- ë„ë©”ì¸ ê°ì²´ ì¡°ì‘
- ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™

### Repository ê³„ì¸µ
- ë°ì´í„° ì ‘ê·¼ ì¶”ìƒí™”
- ì¿¼ë¦¬ ì‹¤í–‰ ë° ìµœì í™”
- JPA Repository íŒ¨í„´ í™œìš©

### Entity ê³„ì¸µ
- ë„ë©”ì¸ ëª¨ë¸ í‘œí˜„
- ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ìº¡ìŠí™”
- ë°ì´í„° ë¬´ê²°ì„± ë³´ì¥

### DTO ê³„ì¸µ
- ê³„ì¸µ ê°„ ë°ì´í„° ì „ì†¡
- ì…ì¶œë ¥ ë°ì´í„° êµ¬ì¡° ì •ì˜
- Validation ê·œì¹™ í¬í•¨

## âœ… íŒ¨í‚¤ì§€ ìƒì„± ê·œì¹™

### ìƒˆ ë„ë©”ì¸ ì¶”ê°€ ì‹œ
1. `domain/{domain_name}/` ë””ë ‰í„°ë¦¬ ìƒì„±
2. í‘œì¤€ ê³„ì¸µ íŒ¨í‚¤ì§€ ìƒì„± (controller, service, repository, entity, dto)
3. ë„ë©”ì¸ë³„ README ì‘ì„± (ì„ íƒì‚¬í•­)

### ìƒˆ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ  
1. ê¸°ì¡´ ë„ë©”ì¸ì— í¬í•¨ë˜ëŠ”ì§€ íŒë‹¨
2. ìƒˆ ì„œë¸Œ ë„ë©”ì¸ì´ í•„ìš”í•œì§€ í‰ê°€
3. ì ì ˆí•œ ê³„ì¸µì— í´ë˜ìŠ¤ ë°°ì¹˜

## âŒ í”¼í•´ì•¼ í•  íŒ¨í„´

### ê³„ì¸µë³„ íŒ¨í‚¤ì§€ êµ¬ì¡° (ê¸ˆì§€)
```
âŒ ì˜ëª»ëœ êµ¬ì¡°
com.iroomclass.springbackend/
â”œâ”€â”€ controller/               # ê³„ì¸µë³„ ë¶„ë¦¬ ê¸ˆì§€
â”œâ”€â”€ service/
â”œâ”€â”€ repository/
â””â”€â”€ dto/
```

### ê¸°ìˆ ì  ë¶„ë¥˜ (ì§€ì–‘)
```  
âŒ ì§€ì–‘í•  êµ¬ì¡°
â”œâ”€â”€ rest/                     # ê¸°ìˆ ì  ë¶„ë¥˜
â”œâ”€â”€ jpa/
â””â”€â”€ validation/
```

## ğŸ¯ ë„ë©”ì¸ ê°„ í†µì‹  ê·œì¹™

### âœ… í—ˆìš©ë˜ëŠ” ì˜ì¡´ì„±
```java
// Service ê°„ í†µì‹  (DTO ì‚¬ìš©)
@Service
public class ExamService {
    private final UserService userService;  // ë‹¤ë¥¸ ë„ë©”ì¸ ì„œë¹„ìŠ¤
    
    public ExamDto createExam(CreateExamRequest request) {
        UserDto user = userService.findById(request.userId());  // DTO êµí™˜
        // ì‹œí—˜ ìƒì„± ë¡œì§
    }
}
```

### âŒ ê¸ˆì§€ë˜ëŠ” ì˜ì¡´ì„±
```java
// Entity ì§ì ‘ ì°¸ì¡° ê¸ˆì§€
@Service  
public class ExamService {
    private final UserRepository userRepository;  // ë‹¤ë¥¸ ë„ë©”ì¸ Repository ì§ì ‘ ì‚¬ìš© ê¸ˆì§€
    
    public ExamDto createExam(CreateExamRequest request) {
        User user = userRepository.findById(request.userId());  // ê¸ˆì§€!
    }
}
```

## ğŸ“ íŒŒì¼ ëª…ëª… ê·œì¹™

### Controller
- `{ë„ë©”ì¸}Controller.java`: `UserController.java`
- `Admin{ê¸°ëŠ¥}Controller.java`: `AdminExamController.java`

### Service
- `{ë„ë©”ì¸}Service.java`: `UserService.java`
- íŠ¹ìˆ˜ ì„œë¹„ìŠ¤: `AiImageRecognitionService.java`

### Repository
- `{ì—”í‹°í‹°}Repository.java`: `UserRepository.java`

### Entity
- ë‹¨ìˆ˜í˜• ëª…ì‚¬: `User.java`, `Exam.java`, `Question.java`

### DTO  
- ëª©ì  ëª…ì‹œ: `UserLoginRequest.java`, `ExamCreateResponse.java`
- Record í˜•íƒœ: `public record UserDto(...) {}`

## ğŸ” íŒ¨í‚¤ì§€ ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

ìƒˆ í´ë˜ìŠ¤ ìƒì„± ì‹œ í™•ì¸ì‚¬í•­:
- [ ] ì˜¬ë°”ë¥¸ ë„ë©”ì¸ íŒ¨í‚¤ì§€ì— ìœ„ì¹˜
- [ ] ì ì ˆí•œ ê³„ì¸µ íŒ¨í‚¤ì§€ ì„ íƒ  
- [ ] ëª…ëª… ê·œì¹™ ì¤€ìˆ˜
- [ ] ë„ë©”ì¸ ê²½ê³„ ìœ„ë°˜ ì—†ìŒ
- [ ] ìˆœí™˜ ì˜ì¡´ì„± ì—†ìŒ

ì´ êµ¬ì¡°ë¥¼ ë”°ë¼ ì¼ê´€ë˜ê³  í™•ì¥ ê°€ëŠ¥í•œ ì½”ë“œë² ì´ìŠ¤ë¥¼ ìœ ì§€í•˜ì„¸ìš”.